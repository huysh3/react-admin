{"version":3,"sources":["../node_modules/ramda/es/internal/_xall.js","../node_modules/ramda/es/internal/_reduced.js","../node_modules/ramda/es/all.js","../node_modules/ramda/es/values.js","views/login/login.js","views/login/index.js"],"names":["XAll","f","xf","this","all","prototype","_xfBase","init","result","input","x","_curry2","_dispatchable","fn","list","idx","length","_curry1","obj","props","keys","len","vals","Login","state","form","username","password","canApply","btnClass","handleInput","bind","login","nextProps","nextState","className","type","name","placeholder","onChange","disabled","onClick","evt","target","value","anather","formData","path","valid","compose","val","values","setState","dispatchLogin","history","user","lastname","img","permission","isAdmin","setSessionStore","push","Component","withRouter","connect","owns","dispatch","doLogin"],"mappings":"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","file":"static/js/login.05dd6524.js","sourcesContent":["import _curry2 from './_curry2.js';\nimport _reduced from './_reduced.js';\nimport _xfBase from './_xfBase.js';\n\nvar XAll =\n/*#__PURE__*/\nfunction () {\n  function XAll(f, xf) {\n    this.xf = xf;\n    this.f = f;\n    this.all = true;\n  }\n\n  XAll.prototype['@@transducer/init'] = _xfBase.init;\n\n  XAll.prototype['@@transducer/result'] = function (result) {\n    if (this.all) {\n      result = this.xf['@@transducer/step'](result, true);\n    }\n\n    return this.xf['@@transducer/result'](result);\n  };\n\n  XAll.prototype['@@transducer/step'] = function (result, input) {\n    if (!this.f(input)) {\n      this.all = false;\n      result = _reduced(this.xf['@@transducer/step'](result, false));\n    }\n\n    return result;\n  };\n\n  return XAll;\n}();\n\nvar _xall =\n/*#__PURE__*/\n_curry2(function _xall(f, xf) {\n  return new XAll(f, xf);\n});\n\nexport default _xall;","export default function _reduced(x) {\n  return x && x['@@transducer/reduced'] ? x : {\n    '@@transducer/value': x,\n    '@@transducer/reduced': true\n  };\n}","import _curry2 from './internal/_curry2.js';\nimport _dispatchable from './internal/_dispatchable.js';\nimport _xall from './internal/_xall.js';\n/**\n * Returns `true` if all elements of the list match the predicate, `false` if\n * there are any that don't.\n *\n * Dispatches to the `all` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig (a -> Boolean) -> [a] -> Boolean\n * @param {Function} fn The predicate function.\n * @param {Array} list The array to consider.\n * @return {Boolean} `true` if the predicate is satisfied by every element, `false`\n *         otherwise.\n * @see R.any, R.none, R.transduce\n * @example\n *\n *      const equals3 = R.equals(3);\n *      R.all(equals3)([3, 3, 3, 3]); //=> true\n *      R.all(equals3)([3, 3, 1, 3]); //=> false\n */\n\nvar all =\n/*#__PURE__*/\n_curry2(\n/*#__PURE__*/\n_dispatchable(['all'], _xall, function all(fn, list) {\n  var idx = 0;\n\n  while (idx < list.length) {\n    if (!fn(list[idx])) {\n      return false;\n    }\n\n    idx += 1;\n  }\n\n  return true;\n}));\n\nexport default all;","import _curry1 from './internal/_curry1.js';\nimport keys from './keys.js';\n/**\n * Returns a list of all the enumerable own properties of the supplied object.\n * Note that the order of the output array is not guaranteed across different\n * JS platforms.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {k: v} -> [v]\n * @param {Object} obj The object to extract values from\n * @return {Array} An array of the values of the object's own properties.\n * @see R.valuesIn, R.keys\n * @example\n *\n *      R.values({a: 1, b: 2, c: 3}); //=> [1, 2, 3]\n */\n\nvar values =\n/*#__PURE__*/\n_curry1(function values(obj) {\n  var props = keys(obj);\n  var len = props.length;\n  var vals = [];\n  var idx = 0;\n\n  while (idx < len) {\n    vals[idx] = obj[props[idx]];\n    idx += 1;\n  }\n\n  return vals;\n});\n\nexport default values;","import React, { Component } from 'react'\nimport { withRouter } from 'react-router'\nimport { values, compose, all, path } from 'ramda'\nimport 'scss/login.scss'\n\nimport { setSessionStore, className } from 'js/utils'\n\nclass Login extends Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            form: {\n                username: '',\n                password: ''\n            },\n            canApply: false,\n            btnClass: 'login-btn disabled'\n        }\n\n        this.handleInput = this.handleInput.bind(this)\n\n        this.login = this.login.bind(this)\n    }\n\n    shouldComponentUpdate (nextProps, nextState) {\n\t\tif(this.state.canApply !== nextState.canApply) return true\n\t\treturn false\n\t}\n\n    render () {\n        return (\n            <section className=\"login\">\n                <div className=\"login-form\">\n                    <h2 className=\"login-title\">登录</h2>\n                    <input className=\"common-input\" type=\"text\" name=\"username\" placeholder=\"帐号\" onChange={ this.handleInput } />\n                    <input className=\"common-input\" type=\"password\" name=\"password\" placeholder=\"密码\" onChange={ this.handleInput } />\n                    <button className={ this.state.btnClass } disabled={ !this.state.canApply } onClick={ this.login }>登录</button>\n                </div>\n            </section>\n        )\n    }\n\n    handleInput (evt) {\n        const target = evt.target\n        const { name, value } = target\n        const anather = name === 'username' ? 'password' : 'username'\n        const formData = {\n            [name]: value,\n            [anather]: path(['form', anather], this.state)\n        }\n        const validForm = val => !!val\n        const valid = compose(all(validForm), values)(formData)\n        this.setState({\n            form: formData,\n            canApply: valid,\n            btnClass: className({\n                'login-btn': true,\n                'disabled': !valid\n            })\n        })\n    }\n\n    login () {\n        const { dispatchLogin, history } = this.props\n        const { form } = this.state\n        const user = {\n            username: form.username,\n            lastname: form.username,\n            img: 'avatar.png',\n            permission: ['add'],\n            isAdmin: false\n        }\n        dispatchLogin(user)\n        setSessionStore('user', user)\n\n        // login success\n        history.push('/front/approval/undo')\n    }  \n}\n\nexport default withRouter(Login)","import { connect } from 'react-redux'\nimport { doLogin } from 'store/action'\nimport Login from './login'\n\nconst mapStateToProps = (state, owns) => ({\n    user: state,\n    ...owns\n})\n\nconst mapDispatchToProps = dispatch => ({\n    dispatchLogin: user => dispatch(doLogin(user))\n})\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Login)\n"],"sourceRoot":""}